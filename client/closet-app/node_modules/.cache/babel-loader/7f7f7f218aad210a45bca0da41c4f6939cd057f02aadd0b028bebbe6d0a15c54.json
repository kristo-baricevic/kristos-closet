{"ast":null,"code":"import _classCallCheck from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUploader=/*#__PURE__*/function(_Component){_inherits(ImageUploader,_Component);var _super=_createSuper(ImageUploader);function ImageUploader(props){var _this;_classCallCheck(this,ImageUploader);_this=_super.call(this,props);_this.handleFileUpload=function(event){var file=event.target.files[0];_this.setState({imageUrl:URL.createObjectURL(file)});};_this.classifyImage=function(event){event.preventDefault();// Check if the user is authenticated and show an alert if they are not\nif(!_this.props.isAuthenticated){alert('You need to be logged in to upload an image.');return;}var file=document.getElementById('imageFile').files[0];var formData=new FormData();formData.append('imageFile',file);formData.append('category',_this.state.selectedCategory);formData.append('userId',_this.props.user.id);// Get the JWT token from local storage\nvar token=localStorage.getItem('token');console.log(token);fetch('/backend/Upload',{method:'POST',body:formData,headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(data){// Handle the response from the backend\n_this.setState({imageUrl:null});_this.props.onImageUploaded();console.log(data);}).catch(function(error){// Handle the error\nconsole.log(error);});};_this.state={imageUrl:null,selectedCategory:''};return _this;}_createClass(ImageUploader,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"upload-title\",children:\"Upload Your Article of Clothing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-container\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"imageForm\",onSubmit:this.classifyImage,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",value:this.state.selectedCategory,onChange:function onChange(e){return _this2.setState({selectedCategory:e.target.value});},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Top\",children:\"Top\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bottom\",children:\"Bottom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"onePiece\",children:\"One-piece\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Shoes\",children:\"Shoes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hat\",children:\"Hat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accessory\",children:\"Accessory\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"choose-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile\",accept:\".jpg,.jpeg,.png,.gif\",required:true,onChange:this.handleFileUpload}),\"Choose File\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"classify-button\",id:\"classifyButton\",type:\"submit\",children:\"Upload Image\"})]})}),/*#__PURE__*/_jsx(\"p\",{id:\"resultLabel\"}),/*#__PURE__*/_jsx(\"div\",{id:\"imageContainer\",children:this.state.imageUrl&&/*#__PURE__*/_jsx(\"img\",{id:\"uploadedImage\",alt:\"Uploaded Image\",src:this.state.imageUrl})})]});}}]);return ImageUploader;}(Component);export default ImageUploader;","map":{"version":3,"names":["React","Component","jsx","_jsx","jsxs","_jsxs","ImageUploader","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleFileUpload","event","file","target","files","setState","imageUrl","URL","createObjectURL","classifyImage","preventDefault","isAuthenticated","alert","document","getElementById","formData","FormData","append","state","selectedCategory","user","id","token","localStorage","getItem","console","log","fetch","method","body","headers","concat","then","response","json","data","onImageUploaded","catch","error","_createClass","key","value","render","_this2","children","className","onSubmit","htmlFor","onChange","e","required","type","accept","alt","src"],"sources":["/Users/kristo/kristos-closet/client/closet-app/src/components/ImageUploader.js"],"sourcesContent":["import React, { Component } from 'react';\n\nclass ImageUploader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageUrl: null,\n      selectedCategory: '',\n    };\n  }\n\n  handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    this.setState({ imageUrl: URL.createObjectURL(file) });\n  }\n\n  classifyImage = (event) => {\n    event.preventDefault();\n\n    // Check if the user is authenticated and show an alert if they are not\n    if (!this.props.isAuthenticated) {\n      alert('You need to be logged in to upload an image.');\n      return;\n    }\n\n    const file = document.getElementById('imageFile').files[0];\n    const formData = new FormData();\n    formData.append('imageFile', file);\n    formData.append('category', this.state.selectedCategory);\n    formData.append('userId', this.props.user.id);\n\n    // Get the JWT token from local storage\n    const token = localStorage.getItem('token');\n    console.log(token);\n\n    fetch('/backend/Upload', {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    })\n    .then(response => response.json())\n    .then(data => {\n      // Handle the response from the backend\n      this.setState({ imageUrl: null });\n      this.props.onImageUploaded();\n      console.log(data);\n    })\n    .catch(error => {\n      // Handle the error\n      console.log(error);\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <h2 className=\"upload-title\">Upload Your Article of Clothing</h2>\n        <div className=\"upload-container\">\n          <form id=\"imageForm\" onSubmit={this.classifyImage}>\n            <label htmlFor=\"category\">Category:</label>\n            <select id=\"category\" value={this.state.selectedCategory} onChange={(e) => this.setState({ selectedCategory: e.target.value })} required>\n              <option value=\"Top\">Top</option>\n              <option value=\"Bottom\">Bottom</option>\n              <option value=\"onePiece\">One-piece</option>\n              <option value=\"Shoes\">Shoes</option>\n              <option value=\"Hat\">Hat</option>\n              <option value=\"Accessory\">Accessory</option>\n            </select>\n            <label className=\"choose-file\">\n              <input type=\"file\" id=\"imageFile\" accept=\".jpg,.jpeg,.png,.gif\" required onChange={this.handleFileUpload} />\n              Choose File\n            </label>\n            <button className=\"classify-button\" id=\"classifyButton\" type=\"submit\">Upload Image</button>\n          </form>\n        </div>\n\n        <p id=\"resultLabel\"></p>\n\n        <div id=\"imageContainer\">\n          {this.state.imageUrl && <img id=\"uploadedImage\" alt=\"Uploaded Image\" src={this.state.imageUrl} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ImageUploader;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}