{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  items: {\n    top: null,\n    bottom: null,\n    shoes: null,\n    hat: null,\n    onePiece: null,\n    accessories: []\n  },\n  loading: false,\n  error: null\n};\nexport const selectedItemsSlice = createSlice({\n  name: 'selectedItems',\n  initialState,\n  reducers: {\n    addItem: (state, action) => {\n      const {\n        category,\n        item\n      } = action.payload;\n      if (!isValidAddition(state, category, item)) {\n        console.error('Invalid addition:', category, item);\n        return state; // Return the unchanged state\n      }\n\n      // Create a new state object by merging the current state with the changes\n      return {\n        ...state,\n        [category]: item,\n        top: item.category === 'onePiece' ? null : state.top,\n        bottom: item.category === 'onePiece' ? null : state.bottom,\n        onePiece: item.category === 'top' || item.category === 'bottom' ? null : state.onePiece,\n        accessories: category === 'accessories' && state.accessories.length < 3 ? [...state.accessories, item] : state.accessories\n      };\n    },\n    removeItem: (state, action) => {\n      const {\n        category,\n        itemId\n      } = action.payload;\n\n      // Update the state by removing the item from the specified category\n      state[category] = state[category].filter(item => item.id !== itemId);\n    }\n  }\n});\n\n// Function to check if adding a certain item is valid based on constraints\nfunction isValidAddition(state, category, newItem) {\n  if (category === 'accessories' && state.accessories.length >= 3) {\n    console.error('too many accessories');\n    return false; // Too many accessories\n  }\n\n  if (newItem.category === 'onePiece') {\n    return !state.top && !state.bottom;\n  }\n  if (newItem.category === 'top' || newItem.category === 'bottom') {\n    return !state.onePiece;\n  }\n  return true;\n}\nexport const selectedItems = state => state.selectedItems.items;\nexport const selectedItemsLoading = state => state.selectedItems.loading;\nexport const selectedItemsError = state => state.selectedItems.error;\nexport const {\n  addItem,\n  removeItem\n} = selectedItemsSlice.actions;\nexport const selectedItemsSliceReducer = selectedItemsSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","items","top","bottom","shoes","hat","onePiece","accessories","loading","error","selectedItemsSlice","name","reducers","addItem","state","action","category","item","payload","isValidAddition","console","length","removeItem","itemId","filter","id","newItem","selectedItems","selectedItemsLoading","selectedItemsError","actions","selectedItemsSliceReducer","reducer"],"sources":["/Users/kristo/kristos-closet/client/closet-app/src/features/selectedItemsSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n    items: {\n      top: null,\n      bottom: null,\n      shoes: null,\n      hat: null,\n      onePiece: null,\n      accessories: [],\n  },\n  loading: false,\n  error: null,\n};\n\nexport const selectedItemsSlice = createSlice({\n  name: 'selectedItems',\n  initialState,\n  reducers: {\n    addItem: (state, action) => {\n      const { category, item } = action.payload;\n  \n      if (!isValidAddition(state, category, item)) {\n          console.error('Invalid addition:', category, item);\n          return state; // Return the unchanged state\n      }\n  \n      // Create a new state object by merging the current state with the changes\n      return {\n          ...state,\n          [category]: item,\n          top: item.category === 'onePiece' ? null : state.top,\n          bottom: item.category === 'onePiece' ? null : state.bottom,\n          onePiece: (item.category === 'top' || item.category === 'bottom') ? null : state.onePiece,\n          accessories: (category === 'accessories' && state.accessories.length < 3)\n              ? [...state.accessories, item]\n              : state.accessories,\n      };\n  },  \n    removeItem: (state, action) => {\n\n      const { category, itemId } = action.payload;\n      \n      // Update the state by removing the item from the specified category\n      state[category] = state[category].filter(item => item.id !== itemId);\n    },\n  },\n});\n\n// Function to check if adding a certain item is valid based on constraints\nfunction isValidAddition(state, category, newItem) {\n  if (category === 'accessories' && state.accessories.length >= 3) {\n    console.error('too many accessories');\n    return false; // Too many accessories\n  }\n\n  if (newItem.category === 'onePiece') {\n    return !state.top && !state.bottom;\n  }\n\n  if (newItem.category === 'top' || newItem.category === 'bottom') {\n    return !state.onePiece;\n  }\n\n  return true;\n}\n\nexport const selectedItems = (state) => state.selectedItems.items;\nexport const selectedItemsLoading = (state) => state.selectedItems.loading;\nexport const selectedItemsError = (state) => state.selectedItems.error;\n\nexport const { addItem, removeItem } = selectedItemsSlice.actions;\nexport const selectedItemsSliceReducer = selectedItemsSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}