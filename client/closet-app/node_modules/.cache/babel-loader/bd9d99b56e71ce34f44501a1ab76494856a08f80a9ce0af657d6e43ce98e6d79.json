{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nconst initialState = {\n  isUploadingImage: false,\n  uploadError: null\n};\nexport const uploadImageAndMetaData = createAsyncThunk(\"user/uploadImageAndMetaData\", async ({\n  imageFile,\n  dbFormData\n}) => {\n  console.log(\"inside upload action\");\n  try {\n    const token = localStorage.getItem(\"token\");\n    const headers = {\n      Authorization: `Bearer ${token}`\n    };\n    console.log(\"uploadSlice formData\", dbFormData);\n    const combinedFormData = new FormData();\n    combinedFormData.append(\"imageFile\", imageFile);\n    for (const [key, value] of dbFormData.entries()) {\n      combinedFormData.append(key, value);\n    }\n    await axios.post(\"https://kristos-closet.vercel.app/api/upload\", combinedFormData, {\n      headers\n    });\n    return combinedFormData;\n  } catch (error) {\n    throw error;\n  }\n});\nconst uploadSlice = createSlice({\n  name: \"upload\",\n  initialState,\n  reducers: {\n    uploadImageRequest: state => {\n      state.isUploadingImage = true;\n      state.uploadError = null;\n    },\n    uploadImageSuccess: state => {\n      state.isUploadingImage = false;\n      state.uploadError = null;\n    },\n    uploadImageFailure: (state, action) => {\n      state.isUploadingImage = false;\n      state.uploadError = action.payload;\n    }\n  }\n});\nexport const {\n  uploadImageRequest,\n  uploadImageSuccess,\n  uploadImageFailure\n} = uploadSlice.actions;\nexport const selectIsUploadingImage = state => state.upload.isUploadingImage;\nexport const selectUploadError = state => state.upload.uploadError;\nexport const uploadSliceReducer = uploadSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","useDispatch","axios","initialState","isUploadingImage","uploadError","uploadImageAndMetaData","imageFile","dbFormData","console","log","token","localStorage","getItem","headers","Authorization","combinedFormData","FormData","append","key","value","entries","post","error","uploadSlice","name","reducers","uploadImageRequest","state","uploadImageSuccess","uploadImageFailure","action","payload","actions","selectIsUploadingImage","upload","selectUploadError","uploadSliceReducer","reducer"],"sources":["/Users/kristo/kristos-closet/client/closet-app/src/features/uploadSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\n\nconst initialState = {\n  isUploadingImage: false,\n  uploadError: null,\n};\n\nexport const uploadImageAndMetaData = createAsyncThunk(\n  \"user/uploadImageAndMetaData\",\n  async ( {imageFile, dbFormData} ) => {\n    console.log(\"inside upload action\");\n    try {\n\n      const token = localStorage.getItem(\"token\");\n      const headers = {\n        Authorization: `Bearer ${token}`,\n      };\n      \n      console.log(\"uploadSlice formData\", dbFormData);\n\n      const combinedFormData = new FormData();\n\n      combinedFormData.append(\"imageFile\", imageFile);\n\n      for (const [key, value] of dbFormData.entries()) {\n        combinedFormData.append(key, value);\n      }\n\n      await axios.post(\"https://kristos-closet.vercel.app/api/upload\", combinedFormData, {\n        headers,\n      });\n\n      return combinedFormData;\n    } catch (error) {\n      throw error;\n    }\n  }\n);\n\nconst uploadSlice = createSlice({\n  name: \"upload\",\n  initialState,\n  reducers: {\n    uploadImageRequest: (state) => {\n      state.isUploadingImage = true;\n      state.uploadError = null;\n    },\n    uploadImageSuccess: (state) => {\n      state.isUploadingImage = false;\n      state.uploadError = null;\n    },\n    uploadImageFailure: (state, action) => {\n      state.isUploadingImage = false;\n      state.uploadError = action.payload;\n    },\n  },\n});\n\nexport const {\n  uploadImageRequest,\n  uploadImageSuccess,\n  uploadImageFailure,\n} = uploadSlice.actions;\n\nexport const selectIsUploadingImage = (state) => state.upload.isUploadingImage;\nexport const selectUploadError = (state) => state.upload.uploadError;\n\nexport const uploadSliceReducer = uploadSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG;EACnBC,gBAAgB,EAAE,KAAK;EACvBC,WAAW,EAAE;AACf,CAAC;AAED,OAAO,MAAMC,sBAAsB,GAAGN,gBAAgB,CACpD,6BAA6B,EAC7B,OAAQ;EAACO,SAAS;EAAEC;AAAU,CAAC,KAAM;EACnCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACnC,IAAI;IAEF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,OAAO,GAAG;MACdC,aAAa,EAAG,UAASJ,KAAM;IACjC,CAAC;IAEDF,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,UAAU,CAAC;IAE/C,MAAMQ,gBAAgB,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAEvCD,gBAAgB,CAACE,MAAM,CAAC,WAAW,EAAEX,SAAS,CAAC;IAE/C,KAAK,MAAM,CAACY,GAAG,EAAEC,KAAK,CAAC,IAAIZ,UAAU,CAACa,OAAO,CAAC,CAAC,EAAE;MAC/CL,gBAAgB,CAACE,MAAM,CAACC,GAAG,EAAEC,KAAK,CAAC;IACrC;IAEA,MAAMlB,KAAK,CAACoB,IAAI,CAAC,8CAA8C,EAAEN,gBAAgB,EAAE;MACjFF;IACF,CAAC,CAAC;IAEF,OAAOE,gBAAgB;EACzB,CAAC,CAAC,OAAOO,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CACF,CAAC;AAED,MAAMC,WAAW,GAAGzB,WAAW,CAAC;EAC9B0B,IAAI,EAAE,QAAQ;EACdtB,YAAY;EACZuB,QAAQ,EAAE;IACRC,kBAAkB,EAAGC,KAAK,IAAK;MAC7BA,KAAK,CAACxB,gBAAgB,GAAG,IAAI;MAC7BwB,KAAK,CAACvB,WAAW,GAAG,IAAI;IAC1B,CAAC;IACDwB,kBAAkB,EAAGD,KAAK,IAAK;MAC7BA,KAAK,CAACxB,gBAAgB,GAAG,KAAK;MAC9BwB,KAAK,CAACvB,WAAW,GAAG,IAAI;IAC1B,CAAC;IACDyB,kBAAkB,EAAEA,CAACF,KAAK,EAAEG,MAAM,KAAK;MACrCH,KAAK,CAACxB,gBAAgB,GAAG,KAAK;MAC9BwB,KAAK,CAACvB,WAAW,GAAG0B,MAAM,CAACC,OAAO;IACpC;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EACXL,kBAAkB;EAClBE,kBAAkB;EAClBC;AACF,CAAC,GAAGN,WAAW,CAACS,OAAO;AAEvB,OAAO,MAAMC,sBAAsB,GAAIN,KAAK,IAAKA,KAAK,CAACO,MAAM,CAAC/B,gBAAgB;AAC9E,OAAO,MAAMgC,iBAAiB,GAAIR,KAAK,IAAKA,KAAK,CAACO,MAAM,CAAC9B,WAAW;AAEpE,OAAO,MAAMgC,kBAAkB,GAAGb,WAAW,CAACc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}