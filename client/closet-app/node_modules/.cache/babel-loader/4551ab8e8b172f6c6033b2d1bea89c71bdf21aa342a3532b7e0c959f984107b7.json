{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice}from'@reduxjs/toolkit';import axios from'axios';var initialState={images:[],loading:false,error:null};// Thunk action to fetch items\nexport var fetchItems=function fetchItems(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response,data,updatedImages;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch(fetchItemsStart());_context.prev=1;_context.next=4;return axios.get('https://closet-app-backend.fly.dev/api/images');case 4:response=_context.sent;data=response.data;updatedImages=data.map(function(image){return _objectSpread(_objectSpread({},image),{},{isUserImage:image.userId!==null,imageUrl:\"https://closet-app-backend.fly.dev/api/images/\".concat(image.id)});});dispatch(fetchItemsSuccess(updatedImages));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch(fetchItemsFailure(_context.t0));case 13:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var closetSlice=createSlice({name:'initialCloset',initialState:initialState,reducers:{fetchItemsStart:function fetchItemsStart(state){state.loading=true;state.error=null;},fetchItemsSuccess:function fetchItemsSuccess(state,action){state.images=action.payload;state.loading=false;state.error=null;},fetchItemsFailure:function fetchItemsFailure(state,action){state.loading=false;state.error=action.payload;},editImage:function editImage(state,action){var _action$payload=action.payload,id=_action$payload.id,category=_action$payload.category;var imageToEdit=state.images.find(function(image){return image.id===id;});if(imageToEdit){imageToEdit.category=category;}},deleteImage:function deleteImage(state,action){var imageId=action.payload;state.images=state.images.filter(function(image){return image.id!==imageId;});}}});var _closetSlice$actions=closetSlice.actions,fetchItemsStart=_closetSlice$actions.fetchItemsStart,fetchItemsSuccess=_closetSlice$actions.fetchItemsSuccess,fetchItemsFailure=_closetSlice$actions.fetchItemsFailure,editImage=_closetSlice$actions.editImage,deleteImage=_closetSlice$actions.deleteImage;export{fetchItemsStart,fetchItemsSuccess,fetchItemsFailure,editImage,deleteImage};export var selectInitialClosetItems=function selectInitialClosetItems(state){return state.closet.images;};export var selectInitialClosetLoading=function selectInitialClosetLoading(state){return state.closet.loading;};export var selectInitialClosetError=function selectInitialClosetError(state){return state.closet.error;};export var closetSliceReducer=closetSlice.reducer;","map":{"version":3,"names":["createSlice","axios","initialState","images","loading","error","fetchItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","response","data","updatedImages","wrap","_callee$","_context","prev","next","fetchItemsStart","get","sent","map","image","_objectSpread","isUserImage","userId","imageUrl","concat","id","fetchItemsSuccess","t0","fetchItemsFailure","stop","_x","apply","arguments","closetSlice","name","reducers","state","action","payload","editImage","_action$payload","category","imageToEdit","find","deleteImage","imageId","filter","_closetSlice$actions","actions","selectInitialClosetItems","closet","selectInitialClosetLoading","selectInitialClosetError","closetSliceReducer","reducer"],"sources":["/Users/kristo/kristos-closet/client/closet-app/src/features/closetSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst initialState = {\n  images: [],\n  loading: false,\n  error: null,\n};\n\n// Thunk action to fetch items\nexport const fetchItems = () => async (dispatch) => {\n    dispatch(fetchItemsStart());\n  \n    try {\n      const response = await axios.get('https://closet-app-backend.fly.dev/api/images');\n      const data = response.data;\n  \n      const updatedImages = data.map((image) => ({\n        ...image,\n        isUserImage: image.userId !== null,\n        imageUrl: `https://closet-app-backend.fly.dev/api/images/${image.id}`,\n      }));\n  \n      dispatch(fetchItemsSuccess(updatedImages));\n    } catch (error) {\n      dispatch(fetchItemsFailure(error));\n    }\n  };\n\nconst closetSlice = createSlice({\n  name: 'initialCloset',\n  initialState,\n  reducers: {\n    fetchItemsStart: (state) => {\n      state.loading = true;\n      state.error = null;\n    },\n    fetchItemsSuccess: (state, action) => {\n      state.images = action.payload;\n      state.loading = false;\n      state.error = null;\n    },\n    fetchItemsFailure: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    editImage: (state, action) => {\n        const { id, category } = action.payload;\n        const imageToEdit = state.images.find(image => image.id === id);\n        if (imageToEdit) {\n          imageToEdit.category = category;\n        }\n    },\n    deleteImage: (state, action) => {\n        const imageId = action.payload;\n        state.images = state.images.filter(image => image.id !== imageId);\n    },\n  },\n});\n\nexport const {\n  fetchItemsStart,\n  fetchItemsSuccess,\n  fetchItemsFailure,\n  editImage,\n  deleteImage,\n} = closetSlice.actions;\n\nexport const selectInitialClosetItems = (state) => state.closet.images;\nexport const selectInitialClosetLoading = (state) => state.closet.loading;\nexport const selectInitialClosetError = (state) => state.closet.error;\n\nexport const closetSliceReducer = closetSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}