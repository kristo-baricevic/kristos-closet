{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kristo/kristos-closet/client/closet-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{uploadImageAndMetaData}from'../features/uploadSlice';import{selectUser,userIsAuthenticated}from'../features/userSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUploader=function ImageUploader(){var dispatch=useDispatch();var userAuthenticated=useSelector(userIsAuthenticated);var user=useSelector(selectUser);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUserImage=_useState4[0],setIsUserImage=_useState4[1];var handleFileUpload=function handleFileUpload(event){var uploadedFile=event.target.files[0];console.log(\"uploadedFile\",uploadedFile);setImageFile(uploadedFile);};var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),imageFile=_useState6[0],setImageFile=_useState6[1];var classifyImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dbFormData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(userAuthenticated){_context.next=3;break;}alert('You need to be logged in to upload an image.');return _context.abrupt(\"return\");case 3:if(imageFile){_context.next=6;break;}alert('Please choose an image file.');return _context.abrupt(\"return\");case 6:console.log(\"front end imageFile\",imageFile);dbFormData=new FormData();dbFormData.append('user',user);dbFormData.append('category',category);dbFormData.append('isUserImage',isUserImage);console.log(\"user in frontend\",user);console.log(\"dbFormData in front\",dbFormData);dispatch(uploadImageAndMetaData({imageFile:imageFile,dbFormData:dbFormData}));// Clear the selected file and other inputs\nsetImageFile(null);setCategory('');setIsUserImage(false);case 17:case\"end\":return _context.stop();}},_callee);}));return function classifyImage(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload-component-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"upload-title\",children:\"Upload Your Article of Clothing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-container\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"imageForm\",method:\"post\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Top\",children:\"Top\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bottom\",children:\"Bottom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"onePiece\",children:\"One-piece\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Shoes\",children:\"Shoes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hat\",children:\"Hat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accessory\",children:\"Accessory\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"choose-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"uploadedFile\",name:\"uploadedFile\",accept:\".jpg,.jpeg,.png,.gif\",onChange:handleFileUpload}),\"Choose File\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"classify-button\",id:\"classifyButton\",type:\"button\",onClick:classifyImage,children:\"Upload Image\"})]})}),/*#__PURE__*/_jsx(\"p\",{id:\"resultLabel\"}),/*#__PURE__*/_jsx(\"div\",{id:\"imageContainer\",children:imageFile&&/*#__PURE__*/_jsx(\"img\",{id:\"uploadedImage\",alt:\"Uploaded\",src:URL.createObjectURL(imageFile)})})]})});};export default ImageUploader;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","uploadImageAndMetaData","selectUser","userIsAuthenticated","jsx","_jsx","jsxs","_jsxs","ImageUploader","dispatch","userAuthenticated","user","_useState","_useState2","_slicedToArray","category","setCategory","_useState3","_useState4","isUserImage","setIsUserImage","handleFileUpload","event","uploadedFile","target","files","console","log","setImageFile","_useState5","_useState6","imageFile","classifyImage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dbFormData","wrap","_callee$","_context","prev","next","alert","abrupt","FormData","append","stop","apply","arguments","children","className","id","method","encType","htmlFor","value","onChange","e","type","name","accept","onClick","alt","src","URL","createObjectURL"],"sources":["/Users/kristo/kristos-closet/client/closet-app/src/components/ImageUploader.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { uploadImageAndMetaData } from '../features/uploadSlice'; \nimport { selectUser, userIsAuthenticated } from '../features/userSlice';\n\nconst ImageUploader = () => {\n  const dispatch = useDispatch();\n  const userAuthenticated = useSelector(userIsAuthenticated);\n  const user = useSelector(selectUser);\n\n  const [category, setCategory] = useState('');\n  const [isUserImage, setIsUserImage] = useState(false);\n\n  const handleFileUpload = (event) => {\n    const uploadedFile = event.target.files[0];\n    console.log(\"uploadedFile\", uploadedFile);\n    setImageFile(uploadedFile);\n  };\n\n  const [imageFile, setImageFile] = useState(null);\n\n  const classifyImage = async () => {\n    if (!userAuthenticated) { \n      alert('You need to be logged in to upload an image.');\n      return;\n    }\n\n    if (!imageFile) {\n      alert('Please choose an image file.');\n      return;\n    }\n\n    console.log(\"front end imageFile\", imageFile);\n\n    const dbFormData = new FormData();\n    dbFormData.append('user', user);\n    dbFormData.append('category', category);\n    dbFormData.append('isUserImage', isUserImage);\n\n    console.log(\"user in frontend\", user);\n    console.log(\"dbFormData in front\", dbFormData);\n\n    dispatch(uploadImageAndMetaData({imageFile, dbFormData})); \n\n    // Clear the selected file and other inputs\n    setImageFile(null);\n    setCategory('');\n    setIsUserImage(false);\n  };\n\n  return (\n    <div>\n      <div className=\"upload-component-container\">\n      <h2 className=\"upload-title\">Upload Your Article of Clothing</h2>\n      <div className=\"upload-container\">\n        <form id=\"imageForm\" method=\"post\" encType=\"multipart/form-data\">\n          <label htmlFor=\"category\">Category:</label>\n          <select\n            id=\"category\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n          >\n            <option value=\"Top\">Top</option>\n            <option value=\"Bottom\">Bottom</option>\n            <option value=\"onePiece\">One-piece</option>\n            <option value=\"Shoes\">Shoes</option>\n            <option value=\"Hat\">Hat</option>\n            <option value=\"Accessory\">Accessory</option>\n          </select>\n          <label className=\"choose-file\">\n            <input\n              type=\"file\"\n              id=\"uploadedFile\"\n              name=\"uploadedFile\"\n              accept=\".jpg,.jpeg,.png,.gif\"\n              onChange={handleFileUpload}\n            />\n            Choose File\n          </label>\n          <button\n            className=\"classify-button\"\n            id=\"classifyButton\"\n            type=\"button\"\n            onClick={classifyImage}\n          >\n            Upload Image\n          </button>\n        </form>\n      </div>\n\n      <p id=\"resultLabel\"></p>\n\n      <div id=\"imageContainer\">\n        {imageFile && <img id=\"uploadedImage\" alt=\"Uploaded\" src={URL.createObjectURL(imageFile)} />}\n      </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageUploader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}